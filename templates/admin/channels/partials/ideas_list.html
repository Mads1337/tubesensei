<!-- Channel Ideas List Partial for HTMX -->
{% if ideas %}
<div class="space-y-4">
    {% for idea in ideas %}
    <div class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
        <div class="flex items-start justify-between">
            <div class="flex-1 min-w-0">
                <h4 class="text-sm font-medium text-gray-900 dark:text-white">
                    {{ idea.title }}
                </h4>
                <p class="mt-1 text-sm text-gray-600 dark:text-gray-400 line-clamp-2">
                    {{ idea.description[:200] }}{% if idea.description|length > 200 %}...{% endif %}
                </p>

                <div class="mt-2 flex flex-wrap items-center gap-2">
                    <!-- Status Badge -->
                    <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium
                               {% if idea.status.value == 'selected' %}bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300
                               {% elif idea.status.value == 'reviewed' %}bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300
                               {% elif idea.status.value == 'rejected' %}bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300
                               {% elif idea.status.value == 'in_progress' %}bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300
                               {% elif idea.status.value == 'implemented' %}bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300
                               {% else %}bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300{% endif %}">
                        {{ idea.status.value | replace('_', ' ') | title }}
                    </span>

                    <!-- Priority Badge -->
                    <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium
                               {% if idea.priority.value == 'critical' %}bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300
                               {% elif idea.priority.value == 'high' %}bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300
                               {% elif idea.priority.value == 'medium' %}bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300
                               {% else %}bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300{% endif %}">
                        <i class="fas fa-flag mr-1"></i>
                        {{ idea.priority.value | title }}
                    </span>

                    <!-- Category -->
                    {% if idea.category %}
                    <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300">
                        <i class="fas fa-tag mr-1"></i>
                        {{ idea.category }}
                    </span>
                    {% endif %}

                    <!-- Confidence Score -->
                    <span class="text-xs text-gray-500 dark:text-gray-400">
                        <i class="fas fa-chart-line mr-1"></i>
                        {{ "%.0f"|format(idea.confidence_percentage) }}% confidence
                    </span>
                </div>

                <!-- Tags -->
                {% if idea.tags %}
                <div class="mt-2 flex flex-wrap gap-1">
                    {% for tag in idea.tags[:5] %}
                    <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-300">
                        {{ tag }}
                    </span>
                    {% endfor %}
                    {% if idea.tags|length > 5 %}
                    <span class="text-xs text-gray-500 dark:text-gray-400">
                        +{{ idea.tags|length - 5 }} more
                    </span>
                    {% endif %}
                </div>
                {% endif %}
            </div>

            <!-- Actions -->
            <div class="flex-shrink-0 ml-4">
                <div class="flex items-center space-x-2">
                    {% if idea.video %}
                    <a href="{{ idea.video.youtube_url }}"
                       target="_blank"
                       class="text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors"
                       title="View source video">
                        <i class="fab fa-youtube"></i>
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Source Info -->
        <div class="mt-3 pt-3 border-t border-gray-200 dark:border-gray-600 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400">
            <span>
                <i class="fas fa-calendar mr-1"></i>
                Extracted {{ idea.created_at.strftime('%b %d, %Y') }}
            </span>
            {% if idea.video %}
            <span class="truncate max-w-xs" title="{{ idea.video.title }}">
                <i class="fas fa-video mr-1"></i>
                From: {{ idea.video.title[:40] }}{% if idea.video.title|length > 40 %}...{% endif %}
            </span>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

{% if ideas|length >= 50 %}
<div class="mt-4 text-center">
    <button
        class="text-sm text-primary-600 hover:text-primary-500"
        hx-get="/admin/channels/{{ channel.id }}/ideas?offset={{ ideas|length }}"
        hx-target="#ideas-list"
        hx-swap="beforeend"
    >
        Load More Ideas
    </button>
</div>
{% endif %}

{% else %}
<div class="text-center py-8">
    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-700 mb-4">
        <i class="fas fa-lightbulb text-gray-400 text-2xl"></i>
    </div>
    <h3 class="text-sm font-medium text-gray-900 dark:text-white mb-1">No Ideas Generated Yet</h3>
    <p class="text-sm text-gray-500 dark:text-gray-400">
        Ideas will be generated automatically when videos are processed.
    </p>
    <p class="text-xs text-gray-400 dark:text-gray-500 mt-2">
        Sync the channel to discover and process new videos.
    </p>
</div>
{% endif %}
